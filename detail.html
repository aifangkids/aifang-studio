<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å•†å“è©³æƒ… | AiFang Kids Studio</title>

<style>
/* ===== Header ===== */
.site-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px 20px;
  background:#fff;
  box-shadow:0 2px 6px rgba(0,0,0,.08);
  position:sticky;
  top:0;
  z-index:200;
}

.header-left{
  font-size:18px;
  font-weight:bold;
}

.header-center img{
  height:50px; 
  width:auto;
}

.header-right .cart-icon{
  width:32px;
  height:32px;
}

@media screen and (max-width:768px){
  .site-header{
    flex-direction:row;
    justify-content:space-between;
  }
  .header-left{ font-size:16px; }
  .header-center img{ height:40px; }
  .header-right .cart-icon{ width:28px; height:28px; }
}

/* ===== Skeleton Loadingï¼ˆæ«»èŠ±ç²‰å«©ï¼‹æµæ²™æ„Ÿï¼‰ ===== */
.skeleton-card{
  background:#fff;
  border-radius:22px;
  padding:14px;
  box-shadow:0 6px 18px rgba(0,0,0,.05);
  margin-bottom:16px;
}

.skeleton-card::before{
  content:"";
  display:block;
  width:100%;
  aspect-ratio:1/1.2;
  border-radius:18px;
  margin-bottom:12px;
  background:linear-gradient(
    110deg,
    #f6dcdc 25%,
    #fdecec 37%,
    #f6dcdc 63%
  );
  background-size:200% 100%;
  animation:sakuraShimmer 1.6s ease-in-out infinite;
}

.skeleton-card::after{
  content:"";
  display:block;
  height:48px;
  border-radius:12px;
  background:linear-gradient(
    110deg,
    #f6dcdc 25%,
    #fdecec 37%,
    #f6dcdc 63%
  );
  background-size:200% 100%;
  animation:sakuraShimmer 1.6s ease-in-out infinite;
}

@keyframes sakuraShimmer{
  to{ background-position-x:-200%; }
}

/* ===== å•†å“å€ ===== */
.product-main{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:24px;
  margin:24px 0;
}

.product-image{
  width:100%;
  border-radius:18px;
  aspect-ratio:1/1;
  background:#eee;
}

.product-info h1{
  font-size:1.6rem;
  margin-bottom:12px;
}

.product-info .price{
  font-size:1.4rem;
  font-weight:bold;
  margin-bottom:12px;
}

.swatches span{
  display:inline-block;
  width:28px;
  height:28px;
  border-radius:50%;
  margin-right:8px;
  border:1px solid #ccc;
  cursor:pointer;
  transition: transform 0.15s, box-shadow 0.15s;
}

.swatches span.active{
  box-shadow:0 0 0 3px #333;
  transform:scale(1.05);
}

#sizeOptions button{
  margin-right:8px;
  margin-bottom:8px;
  padding:6px 14px;
  border:1px solid #ccc;
  background:#fff;
  cursor:pointer;
}

#sizeOptions button.active{
  border-color:#000;
  background:#000;
  color:#fff;
}

/* ===== Footer ===== */
footer{
  background:#fff;
  padding:20px;
  border-top:1px solid #eee;
  font-size:0.9rem;
  color:#555;
}

.footer-content{
  display:flex;
  justify-content:space-between;
  margin-bottom:12px;
}

.footer-bottom{
  text-align:center;
  font-size:0.8rem;
  color:#999;
}

@media screen and (max-width:768px){
  .product-main{ grid-template-columns:1fr; }
  .footer-content{ flex-direction:column; }
}
</style>

</head>
<body>

<!-- ===== Header ===== -->
<header class="site-header">
  <div class="header-left">AiFangKids</div>
  <div class="header-center">
    <img src="https://raw.githubusercontent.com/aifangkids/aifang-studio/7d26aec250ffc4de7c4778de3aa00af18e0429a6/images/LOGO.png" alt="LOGO">
  </div>
  <div class="header-right">
    <a href="cart.html"><img src="https://cdn-icons-png.flaticon.com/512/34/34568.png" alt="Cart" class="cart-icon"></a>
  </div>
</header>

<div class="wrapper">
  <div class="content-wrapper">

    <!-- Skeleton å…ˆé¡¯ç¤ºï¼Œè³‡æ–™è¼‰å…¥å¾Œæ›¿æ› -->
    <div id="productSkeleton" class="skeleton-card"></div>

    <!-- å•†å“å€ -->
    <div id="productContainer" class="product-main" style="display:none;">
      <div class="product-image" id="productImage"></div>
      <div class="product-info">
        <h1 id="productName"></h1>
        <div class="price" id="productPrice"></div>
        <div class="section">
          <h3>ğŸ¨ é¡è‰²</h3>
          <div class="swatches" id="colorSwatches"></div>
        </div>
        <div class="section">
          <h3>ğŸ“ å°ºå¯¸</h3>
          <div id="sizeOptions"></div>
        </div>
        <div class="section">
          <button id="addToCartBtn">åŠ å…¥è³¼ç‰©è»Š</button>
        </div>
        <div class="section">
          <h3>ğŸ“ å•†å“èªªæ˜</h3>
          <p id="productDescription"></p>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- ===== Footer ===== -->
<footer>
  <div class="footer-content">
    <div class="footer-left">
      <strong>CUSTOMER CENTER</strong><br>
      MAIL: aifangkids@gmail.com<br>
      æœå‹™æ™‚é–“: AM 10:00 - PM 21:00<br>
      é€±æœ«èˆ‡åœ‹å®šå‡æ—¥ä¼‘æ¯ï¼Œè¨‚å–®åŠå‡ºè²¨å°‡æ–¼å·¥ä½œæ—¥ç‚ºæ‚¨è™•ç†
    </div>
    <div class="footer-right">
      <strong>COMPANY INFO</strong><br>
      å…¬å¸åç¨±: ç’¦åŠç«¥è£<br>
      çµ±ä¸€ç·¨è™Ÿ: 95294390
    </div>
  </div>
  <div class="footer-bottom">
    Â© Aifang Kids Studio <span id="year"></span> | All rights reserved
  </div>
</footer>

<script>
// è‡ªå‹•æ›´æ–°å¹´ä»½
document.getElementById('year').textContent = new Date().getFullYear();

// ===== JS å‹•æ…‹è¼‰å…¥å•†å“ =====
const API_URL = 'https://script.google.com/macros/s/AKfycbx3Ob8gxHFXxcVwgY9LEUL71DLtuEfLfk0iw1dZ7dPGrmivVIMbUINBCIJUJirmK8AV/exec'; // <-- æ”¹æˆä½ çš„ JSON URL
const params = new URLSearchParams(location.search);
const productId = params.get('id');

const skeleton = document.getElementById('productSkeleton');
const container = document.getElementById('productContainer');
const nameEl = document.getElementById('productName');
const priceEl = document.getElementById('productPrice');
const imageEl = document.getElementById('productImage');
const colorEl = document.getElementById('colorSwatches');
const sizeEl = document.getElementById('sizeOptions');
const descEl = document.getElementById('productDescription');
const addBtn = document.getElementById('addToCartBtn');

let selectedColor = null;
let selectedSize = null;

// å–å¾—å•†å“è³‡æ–™
fetch(API_URL)
.then(res => res.json())
.then(products => {
  const product = products.find(p => p.id === productId);
  if (!product) return alert('æ‰¾ä¸åˆ°å•†å“');

  // éš±è— Skeletonã€é¡¯ç¤ºå•†å“å€
  skeleton.style.display = 'none';
  container.style.display = 'grid';

  nameEl.textContent = product.name;
  priceEl.textContent = `$${product.basePrice}`;
  descEl.textContent = product.description || '';

  // é¡è‰² swatch
  colorEl.innerHTML = '';
  let activeColorSpan = null;
  (product.colors || []).forEach((c,i)=>{
    const span = document.createElement('span');
    if(c.hex) span.style.background = c.hex;
    span.title = c.name;
    span.onclick = () => {
      colorEl.querySelectorAll('span').forEach(s=>s.classList.remove('active'));
      span.classList.add('active');
      activeColorSpan = span;
      selectedColor = c.name;
      if(c.image) imageEl.innerHTML = `<img src="${c.image}" style="width:100%">`;
    };
    colorEl.appendChild(span);

    // é è¨­ç¬¬ä¸€å€‹ active
    if(i===0){
      span.classList.add('active');
      activeColorSpan = span;
      selectedColor = c.name;
      if(c.image) imageEl.innerHTML = `<img src="${c.image}" style="width:100%">`;
    }
  });

  // å°ºå¯¸æŒ‰éˆ•
  sizeEl.innerHTML = '';
  (product.sizes || []).forEach(s=>{
    const btn = document.createElement('button');
    btn.textContent = s;
    btn.onclick = ()=>{
      sizeEl.querySelectorAll('button').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      selectedSize = s;
    };
    sizeEl.appendChild(btn);
  });

  // åŠ å…¥è³¼ç‰©è»ŠæŒ‰éˆ•ç¤ºç¯„
  addBtn.onclick = ()=>{
    if(!selectedSize) return alert('è«‹å…ˆé¸æ“‡å°ºå¯¸');
    console.log({
      id: product.id,
      color: selectedColor,
      size: selectedSize
    });
    alert('å·²é¸æ“‡å®Œæˆï¼ˆä¸‹ä¸€æ­¥æ¥è³¼ç‰©è»Šï¼‰');
  };
})
.catch(err=>{ console.error(err); alert('å•†å“è³‡æ–™è¼‰å…¥å¤±æ•—'); });

</script>

</body>
</html>
